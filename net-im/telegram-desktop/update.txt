The workflow of importing a new version is:

1. update Makefile's DISTVERSION to new version
2. check Telegram/ThirdParty and update Makefile
3. make makesum
4. sync files/CMakeLists.inj with Arch's version:
   https://git.archlinux.org/svntogit/community.git/tree/trunk/CMakeLists.inj?h=packages/telegram-desktop
5. create a new branch from last patched branch
6. git fetch upstream && git pull upstream <new version tag>
   For tdesktop: version tag is "vX.X.X".
   For libtgvoip: version tag is usually "tdesktop". Make sure that tdesktop's
   last commit matches the commit referenced in ThirdParty.
7. resolve conflicts & git commit
8. git diff <new version tag>..HEAD > new_patch
9. remove old patches
10. make extract
11. apply new_patch
12. make makepatch
13. test & fix problems. repeat steps 8..12
14. remove unnecessary diff in patch with check-diff.py

Steps 8..12 are implemented in sync-patch.sh.
